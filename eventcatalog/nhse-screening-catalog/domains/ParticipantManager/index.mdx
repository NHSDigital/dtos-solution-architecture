---
# id of your domain, used for slugs and references in EventCatalog.
id: ParticipantManager

# Display name of the domain, rendered in EventCatalog
name: Participant Manager

# Version of the domain
version: 0.0.1

# Short summary of your domain
summary: |
  Domain responsible for managing participant information, their enrolment in screening pathways, and their screening episodes within the National Screening Platform.

# Optional badges, rendered to UI by EventCatalog
badges:
  - content: New domain
    backgroundColor: blue
    textColor: blue

# Optional entities this domain contains
entities:
  - id: Participant
    version: 0.0.1
  - id: PathwayEnrolment
    version: 0.0.1
  - id: Episode
    version: 0.0.1
  - id: Pathway
    version: 0.0.1
---

## Overview

The Participant Manager domain is a core part of the National Screening Platform, responsible for managing all aspects related to participants in the screening system. This domain ensures that participants are correctly enrolled in appropriate screening pathways and maintains their screening history through episodes.

## Domain Model

### Core Concepts

#### Participant

- **Identity**: NHS Number (unique identifier)
- **Properties**:
  - Demographics (name, date of birth, address)
  - Contact preferences
  - Status (active, deceased, opted out)
- **Invariants**:
  - Must have a valid NHS Number
  - Cannot be enrolled in the same pathway multiple times simultaneously
  - Cannot be enrolled if deceased
  - Must have valid demographic information

#### Pathway

- **Identity**: Pathway identifier (e.g., "BREAST", "BOWEL")
- **Properties**:
  - Eligibility criteria
  - Screening intervals
  - Pathway-specific settings
- **Invariants**:
  - Must have defined eligibility criteria
  - Must have defined screening intervals

#### PathwayEnrolment

- **Identity**: Composite key (Participant ID + Pathway ID)
- **Properties**:
  - Enrolment status (active, suspended, withdrawn)
  - Enrolment date
  - Last screening date
  - Opt-out status and date
- **Invariants**:
  - Cannot have multiple active enrolments for same participant and pathway
  - Must be associated with a valid participant and pathway
  - Cannot be enrolled if participant is deceased
  - Enrolment dates must be valid and sequential

#### Episode

- **Identity**: Composite key (Participant ID + Pathway ID + Start Date)
- **Properties**:
  - Status (active, completed, closed)
  - Start and end dates
  - Current screening round
- **Invariants**:
  - Cannot overlap with other episodes for same participant and pathway
  - Must be associated with a valid PathwayEnrolment
  - Must be within the active period of the PathwayEnrolment

### Relationships

```
Participant (Aggregate Root)
  └── PathwayEnrolment (Entity)
       ├── Pathway (Reference)
       └── Episode (Entity)
```

### Aggregate Boundaries

The Participant aggregate includes:

- Participant (root)
- PathwayEnrolments
- Episodes

## Domain Responsibilities

1. **Participant Management**

   - Maintain participant demographic information
   - Handle participant identification and deduplication
   - Manage participant contact details and preferences

2. **Pathway Enrolment**

   - Enrol participants in appropriate screening pathways
   - Validate eligibility criteria
   - Manage pathway transitions and exits

3. **Episode Management**
   - Create and manage screening episodes
   - Track episode status and progress
   - Handle episode closure and archiving

## Service Interactions

The domain interacts with other domains through events:

- **Receives Events**

  - `CreateEnrolment`: When a participant needs to be enrolled in a pathway
  - `DeleteEnrolment`: When a participant should be removed from a pathway
  - `CloseEpisode`: When a screening episode needs to be closed

- **Sends Events**
  - `EnrolmentCreated`: Notifies when a participant is successfully enrolled
  - `EnrolmentDeleted`: Confirms when a participant is removed from a pathway
  - `EpisodeOpened`: Signals the start of a new screening episode

## Domain Boundaries

The Participant Manager domain is responsible for:

- Participant identification and management
- Pathway enrolment and eligibility
- Episode lifecycle management

It does NOT handle:

- Clinical screening results (handled by Results domain)
- Appointment scheduling (handled by Scheduling domain)
- Screening program configuration (handled by Configuration domain)

<NodeGraph
  nodes={[
    { id: "Participant", label: "Participant", type: "aggregate" },
    { id: "PathwayEnrolment", label: "PathwayEnrolment", type: "entity" },
    { id: "Pathway", label: "Pathway", type: "reference" },
    { id: "Episode", label: "Episode", type: "entity" },
  ]}
  edges={[
    { from: "Participant", to: "PathwayEnrolment", label: "has many" },
    { from: "PathwayEnrolment", to: "Pathway", label: "references" },
    { from: "PathwayEnrolment", to: "Episode", label: "has many" },
  ]}
/>
